!function(){"use strict";class e{constructor(e,t,s,n){let{item:i,handleCardClick:r}=e;this._templateSelector=t,this._name=i.name,this._link=i.link,this._likes=i.likes,this._ownerId=i.owner._id,this._id=i._id,this._handleCardClick=r,this._handleDeleteClick=s,this._handleLikeClick=n,this._item=i}_countLike(){this._likes.length<1?this._likeCounter.textContent="":this._likeCounter.textContent=this._likes.length}updateLike(e){this._likeCounter.textContent=e.likes.length,this._likeButton.classList.toggle("gallery__like-button_active"),0==this._likeCounter.textContent&&(this._likeCounter.textContent="")}_checkInitialLike(e){this._likes.some((t=>t._id==e._id))&&this._likeButton.classList.add("gallery__like-button_active")}_compareID(e){this._deleteButton=this._element.querySelector(".gallery__delete-button"),this._ownerId!==e._id&&(this._deleteButton.style.display="none")}_getTemplate(){return this._element=this._templateSelector.querySelector(".gallery__card").cloneNode(!0),this._element}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{const e=this._likeButton.classList.contains("gallery__like-button_active");this._handleLikeClick(this,e)})),this._element.querySelector(".gallery__delete-button").addEventListener("click",(()=>{this._handleDeleteClick(this)})),this._cardPicture.addEventListener("click",(()=>this._handleCardClick({name:this._name,link:this._link})))}removeCard(){this._element.remove()}generateCard(e){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".gallery__like-button"),this._cardPicture=this._element.querySelector(".gallery__picture"),this._likeCounter=this._element.querySelector(".gallery__like-counter"),this._setEventListeners(),this._compareID(e),this._checkInitialLike(e),this._countLike(),this._element.querySelector(".gallery__text").textContent=this._name,this._cardPicture.src=this._link,this._cardPicture.alt=this._name,this._element}}class t{constructor(e,t){this._settings=e,this._formElement=t}_showInputError(e){this._errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.add(this._settings.inputErrorClass),this._errorElement.textContent=e.validationMessage,this._errorElement.classList.add(this._settings.errorClass)}_hideInputError(e){this._errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.remove(this._settings.inputErrorClass),this._errorElement.classList.remove(this._settings.errorClass),this._errorElement.textContent=""}_hasInvalidInput(e){return Array.from(e).some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputList)?(this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1)}_handleInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_setEventListeners(){this._inputList=this._formElement.querySelectorAll(this._settings.inputSelector),this._submitButton=this._formElement.querySelector(this._settings.submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._handleInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e){this._popup=document.querySelector(e),this._handleEscapeClose=this._handleEscClose.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popup.classList.add("popup_visible"),document.addEventListener("keydown",this._handleEscapeClose)}close(){this._popup.classList.remove("popup_visible"),document.removeEventListener("keydown",this._handleEscapeClose)}setEventListeners(){this._popup.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup_visible")||e.target.classList.contains("popup__close-button-icon"))&&this.close()}))}}class n extends s{constructor(e,t){super(e),this._handleSubmit=t,this._form=this._popup.querySelector(".popup__form"),this._button=this._form.querySelector(".popup__button"),this._inputList=this._popup.querySelectorAll(".popup__input")}getInputValues(){return this._data={},this._inputList.forEach((e=>{this._data[e.name]=e.value})),this._data}openWithData(e){super.open(),e&&(this._data=e)}close(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Save";this._button.textContent=e,super.close(),this._form.reset()}setEventListeners(){super.setEventListeners(),this._popup.addEventListener("submit",(e=>{this._button.textContent="Saving...",e.preventDefault(),this._handleSubmit(this._data)}))}}const i={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_active"},r=document.querySelector("#card-template").content,o=document.querySelector(".popup__form-profile"),a=document.querySelector(".user__edit-button"),l=document.querySelector(".user__add-button"),c=document.querySelector(".popup__input_value_name"),h=document.querySelector(".popup__input_value_about"),_=document.querySelector(".popup__form-addCard"),u=document.querySelector(".user__avatar-wrapper"),d=document.querySelector(".popup__form-avatar");let p={};const m=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}sendCardData(e){return this._name=e.name,this._link=e.link,fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:this._name,link:this._link})}).then(this._checkResponce)}setUserInfo(e){let{name:t,about:s,avatar:n}=e;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s,avatar:n})}).then(this._checkResponce)}getUserInfo(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then(this._checkResponce)}getInitialCards(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then(this._checkResponce)}deleteCard(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e._id),{method:"DELETE",headers:this._headers}).then(this._checkResponce)}likeAdd(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e._id),{method:"PUT",headers:this._headers}).then(this._checkResponce)}likeDelete(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e._id),{method:"DELETE",headers:this._headers}).then(this._checkResponce)}editProfilePhoto(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponce)}_checkResponce(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"302ca387-b31a-4cb2-8cb9-197e187dc382","Content-Type":"application/json"}}),k=new n(".popup_type_profile",(function(){m.setUserInfo(k.getInputValues()).then((e=>{C.setUserInfo(e),k.close()})).catch((e=>{console.log(e)}))}));k.setEventListeners();const v=new n(".popup_type_addCard",(function(){const e=v.getInputValues(),t={name:e.title,link:e.url};m.sendCardData(t).then((e=>{E.addItem(e),v.close()})).catch((e=>{console.log(e)}))}));v.setEventListeners();const g=new class extends s{constructor(e){super(e),this._elementPic=this._popup.querySelector(".popup__image"),this._elementText=this._popup.querySelector(".popup__image-text")}open(e){let{name:t,link:s}=e;this._elementPic.src=s,this._elementPic.alt="".concat(t," photo"),this._elementText.textContent=t,super.open()}}(".popup_type_image");g.setEventListeners();const y=new n(".popup_type_delete",(function(e){m.deleteCard(e).then((t=>{e.removeCard(),y.close("Yes")})).catch((e=>{console.log(e)}))}));y.setEventListeners();const b=new n(".popup_type_avatar",(function(){const e=b.getInputValues();m.editProfilePhoto(e.avatar).then((t=>{C.setUserAvatar(e.avatar),b.close()})).catch((e=>{console.log(e)}))}));b.setEventListeners();const E=new class{constructor(e,t){let{items:s,renderer:n}=e;this._renderedItems=s,this._renderer=n,this._container=document.querySelector(t)}addItem(e){const t=this._renderer(e);this._container.prepend(t)}renderItems(e){Array.from(e).forEach((e=>{this.addItem(e)}))}}({items:[],renderer:t=>function(t){let{item:s}=t;return new e({item:s,handleCardClick:e=>{let{name:t,link:s}=e;g.open({name:t,link:s})}},r,q,I).generateCard(p)}({item:t})},".gallery"),C=new class{constructor(e,t){let{userName:s,userInfo:n}=e;this._name=document.querySelector(s),this._about=document.querySelector(n),this._avatar=document.querySelector(t)}getUserInfo(){return this._userData={name:this._name.textContent,about:this._about.textContent},this._userData}setUserAvatar(e){this._avatar.src=e}setUserInfo(e){this._name.textContent=e.name,this._about.textContent=e.about}}({userName:".user__name",userInfo:".user__info"},".user__avatar");Promise.all([m.getUserInfo(),m.getInitialCards()]).then((e=>{let[t,s]=e;C.setUserInfo(t),C.setUserAvatar(t.avatar),p=t,E.renderItems(s)})).catch((e=>{console.log(e)}));const f=new t(i,_);f.enableValidation();const L=new t(i,o);L.enableValidation();const S=new t(i,d);function I(e,t){t?m.likeDelete(e).then((t=>{e.updateLike(t)})).catch((e=>{console.log(e)})):m.likeAdd(e).then((t=>{e.updateLike(t)})).catch((e=>{console.log(e)}))}function q(e){y.openWithData(e)}S.enableValidation(),a.addEventListener("click",(()=>{L.resetValidation(),k.open();const e=C.getUserInfo();c.value=e.name,h.value=e.about})),l.addEventListener("click",(()=>{f.resetValidation(),v.open()})),u.addEventListener("click",(()=>{S.resetValidation(),b.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BRW5CaUksT0FBTUMsSUFDSEMsUUFBUUMsSUFBSUYsTUFHcEJoQyxFQUFJb0IsUUFBUWpILEdBQ1B5RyxNQUFNOUcsSUFDSEssRUFBS04sV0FBV0MsTUFFbkJpSSxPQUFNQyxJQUNIQyxRQUFRQyxJQUFJRixNQUs1QixTQUFTMUosRUFBa0I2QixHQUN2QnlJLEVBQVk1RCxhQUFhN0UsR0FqRDdCZ0ssRUFBWTdHLG1CQXVGWmtDLEVBQVd6RSxpQkFBaUIsU0FBUyxLQUNqQ21KLEVBQWE3RyxrQkFDYndFLEVBQWlCM0QsT0FDakIsTUFBTWtHLEVBQWlCdEMsRUFBaUJiLGNBQ3hDdkIsRUFBVVgsTUFBUXFGLEVBQWV2TCxLQUNqQzhHLEVBQVVaLE1BQVFxRixFQUFlckQsU0FHckN0QixFQUFjMUUsaUJBQWlCLFNBQVMsS0FDcENrSixFQUFhNUcsa0JBQ2I4RSxFQUFpQmpFLFVBRXJCMkIsRUFBVzlFLGlCQUFpQixTQUFTLEtBQ2pDb0osRUFBWTlHLGtCQUNad0YsRUFBZTNFLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9mb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICAgIGNvbnN0cnVjdG9yKHsgaXRlbSwgaGFuZGxlQ2FyZENsaWNrIH0sIHRlbXBsYXRlU2VsZWN0b3IsIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVMaWtlQ2xpY2spIHtcbiAgICAgICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX25hbWUgPSBpdGVtLm5hbWU7XG4gICAgICAgIHRoaXMuX2xpbmsgPSBpdGVtLmxpbms7XG4gICAgICAgIHRoaXMuX2xpa2VzID0gaXRlbS5saWtlcztcbiAgICAgICAgdGhpcy5fb3duZXJJZCA9IGl0ZW0ub3duZXIuX2lkO1xuICAgICAgICB0aGlzLl9pZCA9IGl0ZW0uX2lkO1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcbiAgICAgICAgdGhpcy5faXRlbSA9IGl0ZW07XG4gICAgfVxuICAgIF9jb3VudExpa2UoKSB7XG4gICAgICAgIGlmICh0aGlzLl9saWtlcy5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVMaWtlKHJlcykge1xuICAgICAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IHJlcy5saWtlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnZ2FsbGVyeV9fbGlrZS1idXR0b25fYWN0aXZlJyk7XG4gICAgICAgIGlmICh0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2NoZWNrSW5pdGlhbExpa2UoZGF0YSkge1xuICAgICAgICBpZiAodGhpcy5fbGlrZXMuc29tZShpdGVtID0+IGl0ZW0uX2lkID09IGRhdGEuX2lkKSkge1xuICAgICAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdnYWxsZXJ5X19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfY29tcGFyZUlEKGRhdGEpIHtcbiAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeV9fZGVsZXRlLWJ1dHRvbicpO1xuICAgICAgICBpZiAodGhpcy5fb3duZXJJZCAhPT0gZGF0YS5faWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX3RlbXBsYXRlU2VsZWN0b3JcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeV9fY2FyZCcpXG4gICAgICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICB9XG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNMaWtlZCA9IHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdnYWxsZXJ5X19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzLCBpc0xpa2VkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlfX2RlbGV0ZS1idXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fY2FyZFBpY3R1cmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soe1xuICAgICAgICAgICAgbmFtZTogdGhpcy5fbmFtZSxcbiAgICAgICAgICAgIGxpbms6IHRoaXMuX2xpbmtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZW1vdmVDYXJkKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIH1cbiAgICBnZW5lcmF0ZUNhcmQoZGF0YSkge1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlfX2xpa2UtYnV0dG9uJyk7XG4gICAgICAgIHRoaXMuX2NhcmRQaWN0dXJlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeV9fcGljdHVyZScpO1xuICAgICAgICB0aGlzLl9saWtlQ291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlfX2xpa2UtY291bnRlcicpO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9jb21wYXJlSUQoZGF0YSk7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5pdGlhbExpa2UoZGF0YSk7XG4gICAgICAgIHRoaXMuX2NvdW50TGlrZSgpO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5X190ZXh0JykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgICAgICB0aGlzLl9jYXJkUGljdHVyZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgICAgICB0aGlzLl9jYXJkUGljdHVyZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgfVxuXG4gICAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgICAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICAgICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XG4gICAgfVxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcbiAgICAgICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB9XG5cbiAgICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xuICAgICAgICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKGlucHV0TGlzdCk7XG4gICAgICAgIHJldHVybiBpbnB1dHMuc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9oYW5kbGVJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgICAgICBpZiAoaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIH07XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfdmlzaWJsZScpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjYXBlQ2xvc2UpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfdmlzaWJsZScpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjYXBlQ2xvc2UpO1xuICAgIH1cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX3Zpc2libGUnKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ1dHRvbi1pY29uJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgICAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uJyk7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcbiAgICB9XG4gICAgZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIHRoaXMuX2RhdGEgPSB7fTtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9kYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xuICAgIH1cbiAgICBvcGVuV2l0aERhdGEoZGF0YSkge1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZShidXR0b25UZXh0ID0gJ1NhdmUnKSB7XG4gICAgICAgIHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudCA9IGJ1dHRvblRleHQ7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICB9XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9kYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSIsIi8vcGFnZSBzZXR0aW5nc1xuXG5leHBvcnQgY29uc3QgcGFnZVNldHRpbmdzID0ge1xuICAgIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICAgIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX2FjdGl2ZVwiXG59OyIsIi8vaW1wb3J0c1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvZm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQge1xuICAgIHBhZ2VTZXR0aW5ncyxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG4vL3ZhcmlhYmxlc1xuXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudDtcbmNvbnN0IGVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtLXByb2ZpbGUnKTtcbmNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlcl9fZWRpdC1idXR0b24nKTtcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXNlcl9fYWRkLWJ1dHRvbicpO1xuY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF92YWx1ZV9uYW1lJyk7XG5jb25zdCBpbnB1dEluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3ZhbHVlX2Fib3V0Jyk7XG5jb25zdCBhZGRDYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybS1hZGRDYXJkJyk7XG5jb25zdCB1c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVzZXJfX2F2YXRhci13cmFwcGVyJyk7XG5jb25zdCBhdmF0YXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtLWF2YXRhcicpO1xubGV0IGN1cnJlbnRVc2VySW5mbyA9IHt9O1xuXG4vL2NsYXNzIGluc3RhbmNlc1xuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gICAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiBcIjMwMmNhMzg3LWIzMWEtNGNiMi04Y2I5LTE5N2UxODdkYzM4MlwiLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH1cbn0pO1xuXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX3Byb2ZpbGUnLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG5wb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwQWRkQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfYWRkQ2FyZCcsIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KTtcbnBvcHVwQWRkQ2FyZEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfaW1hZ2UnKTtcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgZGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfZGVsZXRlJywgaGFuZGxlRGVsZXRlQ2FyZEZvcm1TdWJtaXQpO1xuZGVsZXRlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBGb3JBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfYXZhdGFyJywgaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdCk7XG5wb3B1cEZvckF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwYWdlR2FsbGVyeSA9IG5ldyBTZWN0aW9uKHtcbiAgICBpdGVtczogW10sXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICAgIHJldHVybiBjcmVhdGVDYXJkKHsgaXRlbSB9KTtcbiAgICB9XG59LCAnLmdhbGxlcnknKTtcblxuY29uc3QgdXNlckluZm9JbnN0YW5jZSA9IG5ldyBVc2VySW5mbyh7IHVzZXJOYW1lOiAnLnVzZXJfX25hbWUnLCB1c2VySW5mbzogJy51c2VyX19pbmZvJyB9LCAnLnVzZXJfX2F2YXRhcicpO1xuXG4vL2luaXRpYWxQYWdlXG5cblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcbiAgICAudGhlbigoW3VzZXJEYXRhLCBjYXJkRGF0YV0pID0+IHtcbiAgICAgICAgdXNlckluZm9JbnN0YW5jZS5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XG4gICAgICAgIHVzZXJJbmZvSW5zdGFuY2Uuc2V0VXNlckF2YXRhcih1c2VyRGF0YS5hdmF0YXIpO1xuICAgICAgICBjdXJyZW50VXNlckluZm8gPSB1c2VyRGF0YTtcbiAgICAgICAgcGFnZUdhbGxlcnkucmVuZGVySXRlbXMoY2FyZERhdGEpO1xuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG5cblxuLy92YWxpZGF0b3JzXG5cbmNvbnN0IHBvcHVwQWRkQ2FyZCA9IG5ldyBGb3JtVmFsaWRhdG9yKHBhZ2VTZXR0aW5ncywgYWRkQ2FyZEZvcm0pO1xucG9wdXBBZGRDYXJkLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgcG9wdXBQcm9maWxlID0gbmV3IEZvcm1WYWxpZGF0b3IocGFnZVNldHRpbmdzLCBlZGl0Rm9ybSk7XG5wb3B1cFByb2ZpbGUuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBhdmF0YXJQb3B1cCA9IG5ldyBGb3JtVmFsaWRhdG9yKHBhZ2VTZXR0aW5ncywgYXZhdGFyRm9ybSk7XG5hdmF0YXJQb3B1cC5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8vZnVuY3Rpb25zXG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoeyBpdGVtIH0pIHtcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xuICAgICAgICAgICAgaXRlbSxcbiAgICAgICAgICAgIGhhbmRsZUNhcmRDbGljazogKHsgbmFtZSwgbGluayB9KSA9PiB7XG4gICAgICAgICAgICAgICAgcG9wdXBJbWFnZS5vcGVuKHsgbmFtZSwgbGluayB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2FyZFRlbXBsYXRlLFxuICAgICAgICBoYW5kbGVEZWxldGVDbGljaywgaGFuZGxlTGlrZUNsaWNrKTtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKGN1cnJlbnRVc2VySW5mbyk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KCkge1xuICAgIGNvbnN0IGRhdGEgPSBwb3B1cEZvckF2YXRhci5nZXRJbnB1dFZhbHVlcygpO1xuICAgIGFwaS5lZGl0UHJvZmlsZVBob3RvKGRhdGEuYXZhdGFyKS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIHVzZXJJbmZvSW5zdGFuY2Uuc2V0VXNlckF2YXRhcihkYXRhLmF2YXRhcik7XG4gICAgICAgICAgICBwb3B1cEZvckF2YXRhci5jbG9zZSgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSlcbn1cblxuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrKGRhdGEsIGlzTGlrZWQpIHtcbiAgICBpZiAoaXNMaWtlZCkge1xuICAgICAgICBhcGkubGlrZURlbGV0ZShkYXRhKVxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGRhdGEudXBkYXRlTGlrZShyZXMpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGFwaS5saWtlQWRkKGRhdGEpXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgZGF0YS51cGRhdGVMaWtlKHJlcyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgIH0pXG4gICAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDbGljayhkYXRhKSB7XG4gICAgZGVsZXRlUG9wdXAub3BlbldpdGhEYXRhKGRhdGEpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDYXJkRm9ybVN1Ym1pdChkYXRhKSB7XG4gICAgYXBpLmRlbGV0ZUNhcmQoZGF0YSkudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICBkYXRhLnJlbW92ZUNhcmQoKTtcbiAgICAgICAgICAgIGRlbGV0ZVBvcHVwLmNsb3NlKCdZZXMnKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pXG59XG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KCkge1xuICAgIGFwaS5zZXRVc2VySW5mbyhwb3B1cEVkaXRQcm9maWxlLmdldElucHV0VmFsdWVzKCkpXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIHVzZXJJbmZvSW5zdGFuY2Uuc2V0VXNlckluZm8ocmVzKTtcbiAgICAgICAgICAgIHBvcHVwRWRpdFByb2ZpbGUuY2xvc2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pXG59XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KCkge1xuICAgIGNvbnN0IGdldFZhbHVlcyA9IHBvcHVwQWRkQ2FyZEZvcm0uZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICBjb25zdCBkYXRhID0geyBuYW1lOiBnZXRWYWx1ZXMudGl0bGUsIGxpbms6IGdldFZhbHVlcy51cmwgfTtcbiAgICBhcGkuc2VuZENhcmREYXRhKGRhdGEpXG4gICAgICAgIC50aGVuKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBwYWdlR2FsbGVyeS5hZGRJdGVtKGl0ZW0pO1xuICAgICAgICAgICAgcG9wdXBBZGRDYXJkRm9ybS5jbG9zZSgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSlcbn1cbi8vZXZlbnQgbGlzdGVuZXJzXG5cbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgcG9wdXBQcm9maWxlLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xuICAgIGNvbnN0IHVzZXJBY3R1YWxJbmZvID0gdXNlckluZm9JbnN0YW5jZS5nZXRVc2VySW5mbygpO1xuICAgIGlucHV0TmFtZS52YWx1ZSA9IHVzZXJBY3R1YWxJbmZvLm5hbWU7XG4gICAgaW5wdXRJbmZvLnZhbHVlID0gdXNlckFjdHVhbEluZm8uYWJvdXQ7XG59KTtcblxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBwb3B1cEFkZENhcmQucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgcG9wdXBBZGRDYXJkRm9ybS5vcGVuKCk7XG59KTtcbnVzZXJBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgYXZhdGFyUG9wdXAucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgcG9wdXBGb3JBdmF0YXIub3BlbigpO1xufSk7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gICAgfVxuICAgIHNlbmRDYXJkRGF0YShpdGVtKSB7XG4gICAgICAgIHRoaXMuX25hbWUgPSBpdGVtLm5hbWU7XG4gICAgICAgIHRoaXMuX2xpbmsgPSBpdGVtLmxpbms7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLFxuICAgICAgICAgICAgICAgICAgICBsaW5rOiB0aGlzLl9saW5rXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbmNlKTtcbiAgICB9XG4gICAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICBhYm91dCxcbiAgICAgICAgICAgICAgICAgICAgYXZhdGFyXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbmNlKTtcbiAgICB9XG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uY2UpO1xuICAgIH1cbiAgICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uY2UpO1xuICAgIH1cbiAgICBkZWxldGVDYXJkKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7ZGF0YS5faWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbmNlKTtcbiAgICB9XG4gICAgbGlrZUFkZChkYXRhKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2RhdGEuX2lkfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25jZSk7XG4gICAgfVxuICAgIGxpa2VEZWxldGUoZGF0YSkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtkYXRhLl9pZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uY2UpO1xuICAgIH1cbiAgICBlZGl0UHJvZmlsZVBob3RvKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBhdmF0YXI6IGRhdGFcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25jZSk7XG4gICAgfVxuICAgIF9jaGVja1Jlc3BvbmNlKHJlcykge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9lbGVtZW50UGljID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xuICAgICAgICB0aGlzLl9lbGVtZW50VGV4dCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UtdGV4dCcpO1xuICAgIH1cbiAgICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnRQaWMuc3JjID0gbGluaztcbiAgICAgICAgdGhpcy5fZWxlbWVudFBpYy5hbHQgPSBgJHtuYW1lfSBwaG90b2A7XG4gICAgICAgIHRoaXMuX2VsZW1lbnRUZXh0LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIGFkZEl0ZW0oaXRlbSkge1xuICAgICAgICBjb25zdCBjYXJkID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGNhcmQpO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKGNhcmREYXRhKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBBcnJheS5mcm9tKGNhcmREYXRhKTtcbiAgICAgICAgZGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRJdGVtKGl0ZW0pO1xuICAgICAgICB9KTtcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKHsgdXNlck5hbWUsIHVzZXJJbmZvIH0sIGF2YXRhcikge1xuICAgICAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZSk7XG4gICAgICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VySW5mbyk7XG4gICAgICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyKTtcbiAgICB9XG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHRoaXMuX3VzZXJEYXRhID0geyBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LCBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhO1xuICAgIH1cbiAgICBzZXRVc2VyQXZhdGFyKGRhdGEpIHtcbiAgICAgICAgdGhpcy5fYXZhdGFyLnNyYyA9IGRhdGE7XG4gICAgfVxuICAgIHNldFVzZXJJbmZvKGRhdGEpIHtcbiAgICAgICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICAgICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xuICAgIH1cbn0iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwidGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiaXRlbSIsImhhbmRsZUNhcmRDbGljayIsInRoaXMiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX293bmVySWQiLCJvd25lciIsIl9pZCIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2l0ZW0iLCJfY291bnRMaWtlIiwibGVuZ3RoIiwiX2xpa2VDb3VudGVyIiwidGV4dENvbnRlbnQiLCJ1cGRhdGVMaWtlIiwicmVzIiwiX2xpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfY2hlY2tJbml0aWFsTGlrZSIsImRhdGEiLCJzb21lIiwiYWRkIiwiX2NvbXBhcmVJRCIsIl9kZWxldGVCdXR0b24iLCJfZWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdHlsZSIsImRpc3BsYXkiLCJfZ2V0VGVtcGxhdGUiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiaXNMaWtlZCIsImNvbnRhaW5zIiwiX2NhcmRQaWN0dXJlIiwicmVtb3ZlQ2FyZCIsInJlbW92ZSIsImdlbmVyYXRlQ2FyZCIsInNyYyIsImFsdCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX3NldHRpbmdzIiwiX2Zvcm1FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiX2Vycm9yRWxlbWVudCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvckNsYXNzIiwiX2hpZGVJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsImlucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInZhbGlkaXR5IiwidmFsaWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaW5wdXRMaXN0IiwiX3N1Ym1pdEJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIl9oYW5kbGVJbnB1dFZhbGlkaXR5IiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImZvckVhY2giLCJyZXNldFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJkb2N1bWVudCIsIl9oYW5kbGVFc2NhcGVDbG9zZSIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJrZXkiLCJjbG9zZSIsIm9wZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlU3VibWl0IiwiX2Zvcm0iLCJfYnV0dG9uIiwiZ2V0SW5wdXRWYWx1ZXMiLCJfZGF0YSIsImlucHV0IiwidmFsdWUiLCJvcGVuV2l0aERhdGEiLCJidXR0b25UZXh0IiwicmVzZXQiLCJwYWdlU2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJjYXJkVGVtcGxhdGUiLCJjb250ZW50IiwiZWRpdEZvcm0iLCJlZGl0QnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsImlucHV0TmFtZSIsImlucHV0SW5mbyIsImFkZENhcmRGb3JtIiwidXNlckF2YXRhciIsImF2YXRhckZvcm0iLCJjdXJyZW50VXNlckluZm8iLCJhcGkiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwic2VuZENhcmREYXRhIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInRoZW4iLCJfY2hlY2tSZXNwb25jZSIsInNldFVzZXJJbmZvIiwiYWJvdXQiLCJhdmF0YXIiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsImRlbGV0ZUNhcmQiLCJsaWtlQWRkIiwibGlrZURlbGV0ZSIsImVkaXRQcm9maWxlUGhvdG8iLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiYXV0aG9yaXphdGlvbiIsInBvcHVwRWRpdFByb2ZpbGUiLCJ1c2VySW5mb0luc3RhbmNlIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwicG9wdXBBZGRDYXJkRm9ybSIsImdldFZhbHVlcyIsInRpdGxlIiwidXJsIiwicGFnZUdhbGxlcnkiLCJhZGRJdGVtIiwicG9wdXBJbWFnZSIsIl9lbGVtZW50UGljIiwiX2VsZW1lbnRUZXh0IiwiZGVsZXRlUG9wdXAiLCJwb3B1cEZvckF2YXRhciIsInNldFVzZXJBdmF0YXIiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJjYXJkIiwicHJlcGVuZCIsInJlbmRlckl0ZW1zIiwiY2FyZERhdGEiLCJjcmVhdGVDYXJkIiwidXNlck5hbWUiLCJ1c2VySW5mbyIsIl9hYm91dCIsIl9hdmF0YXIiLCJfdXNlckRhdGEiLCJhbGwiLCJ1c2VyRGF0YSIsInBvcHVwQWRkQ2FyZCIsInBvcHVwUHJvZmlsZSIsImF2YXRhclBvcHVwIiwidXNlckFjdHVhbEluZm8iXSwic291cmNlUm9vdCI6IiJ9